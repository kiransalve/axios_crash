<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crud Crud </title>
</head>

<body>
    <div>
        <header>
            <h1>Registration Form</h1>
        </header>
       <form onsubmit="savetoCrud(event)">
        <br>
        <hr>
        <br />
            <label for="name">Name : </label>
            <input type="text" name="name" id="name"><br /><br />
            <label for="email">Email : </label>
            <input type="email" name="email" id="email"><br /><br />
            <button type="submit" id="button">Submit</button>
       </form>
       <ul id="listOfUsers"></ul>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.0.0-alpha.1/axios.min.js"></script>
<script>

function savetoCrud(event){
    event.preventDefault();
    const name = event.target.name.value
    const email= event.target.email.value

    const obj = {
        name,email
    }
    axios.post('https://crudcrud.com/api/9832b27910164463b7643c3ea2bb735b/appointmentData',obj) 
    .then(response => console.log(response.data)
    ).catch(error => console.log(error))
}

window.addEventListener("DOMContentLoaded", () => {
    axios.get('https://crudcrud.com/api/9832b27910164463b7643c3ea2bb735b/appointmentData')
    .then(
        response => {
            for(let i =0;i<response.data.length;i++){
                showUsers(response.data[i])
            }
        }
    ).catch(err => console.log(err))
})

function showUsers(user){
    const list = document.getElementById("listOfUsers")
    const node =
    `<li id=${user.email}> ${user.name} - ${user.email}
    <button> Delete </button>
    <button> Edit </button></li>`

list.innerHTML = list.innerHTML + node
}
</script>
</html>